---
title: Gatsby - MDX Code Block ìŠ¤íƒ€ì¼ë§
category: Gatsby
date: '2023-03-05'
author: ha0peno
slug: gatsby-codeblock
thumbnail: gatsby-code.png
---


# prism-react-renderer install
> gatsby-plugin-mdxë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, ì½”ë“œì˜ ê¸°ë³¸ ìŠ¤íƒ€ì¼ì´ ë„ˆë¬´ ì•ˆì˜ˆë»ì„œ ì˜ˆìœ ìŠ¤íƒ€ì¼ë¡œ ì ìš©í•´ë³´ë ¤ê³  ì°¾ì•„ë³´ë‹¤ê°€,
> `prism-react-renderer`ë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í•˜ì˜€ë‹¤.

`npm install prism-react-renderer`

# ì»´í¬ë„ŒíŠ¸ ìƒì„±
- ê·¸ë¦¬ê³  ê³µì‹ë¬¸ì„œì— ìˆëŠ” `CodeBlock`ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ì ¸ì˜¨ ë’¤, language ë“±ì„ íŒŒì‹±í•˜ê³  `theme`ì„ ì›í•˜ëŠ”ê±¸ë¡œ ì ìš©í•´ì¤€ë‹¤.

```ts
import theme from 'prism-react-renderer/themes/dracula'; // í…Œë§ˆëŠ” github ì™¸ì—ë„ ë§ë‹¤

const CodeBlock = ({ children }:any) => {
    const className = children.props.className || '';
    const matches = className.match(/language-(?<lang>.*)/);
    const language = matches?.groups?.lang ?? '';
    const { props: { children: source } } = children

    return (
        <Highlight
            {...defaultProps}
            code={source}
            language={language}
            theme={theme}
        >
            {({ className, tokens, getLineProps, getTokenProps }) => (
                    <pre className={className}>
                        {tokens.map((line, i) => (
                            <div {...getLineProps({ line, key: i })}>
                                {line.map((token, key) => (
                                <span {...getTokenProps({ token, key })} />
                                ))}
                            </div>
                        ))}
                    </pre>
            )}
        </Highlight>
    );
};
```
# ìŠ¤íƒ€ì¼ë§
- ê¸°ë³¸í…Œë§ˆë„ ì˜ˆì˜ì§€ë§Œ, ë‚˜ëŠ” ë­”ê°€ iosí™”ë©´ ì²˜ëŸ¼ ë§Œë“¤ê³  ì‹¶ì–´ì„œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ì„œ ê°ì‹¸ì£¼ì—ˆë‹¤.
```tsx
// ios ë²„íŠ¼í‹€
const Circle = styled.div`
    width: 16px;
    height: 16px;
    background-color: ${props => props.color};
    border-radius: 8px;
`
// ios í…Œë§ˆ í—¤ë”
const CodeBlockHeader = () => {
    return (
        <div style={{display: 'flex', gap: '10px', marginBottom: '24px'}}>
            <Circle color={'#FF5F56'}/>
            <Circle color={'#FFBD2E'}/>
            <Circle color={'#27C93F'}/>
        </div>
    )
}
// ì»¨í…Œì´ë„ˆ
const CodeBlockContainer = styled.div`
    margin: 1em;
    background-color: #2c2c2c;
    border: 1px solid #2a2a2a;
    border-radius: 8px;
    padding: 24px;
    overflow: scroll;
`
```
```tsx
const CodeBlock = ({ children }:any) => {
    const className = children.props.className || '';
    const matches = className.match(/language-(?<lang>.*)/);
    const language = matches?.groups?.lang ?? '';
    const { props: { children: source } } = children

    return (
        <Highlight
            {...defaultProps}
            code={source}
            language={language}
            theme={theme}
        >
            {({ className, tokens, getLineProps, getTokenProps }) => (
                <CodeBlockContainer> // ì»¨í…Œì´ë„ˆë¡œ ê°ì‹¸ì£¼ê³ 
                    <CodeBlockHeader/> // iosí—¤ë” ì‚½ì…
                    <pre className={className}>
                        {tokens.map((line, i) => (
                            <div {...getLineProps({ line, key: i })}>
                                {line.map((token, key) => (
                                <span {...getTokenProps({ token, key })} />
                                ))}
                            </div>
                        ))}
                    </pre>
                </CodeBlockContainer>
            )}
        </Highlight>
    );
};
```
# MDX Providerì— ì»´í¬ë„ŒíŠ¸ ì ìš©
```tsx
export default function MDXLayout({children} :any) {
    return (
        <MDXProvider
            components={{
                pre:  (props:any) => CodeBlock(props),
            }}
        >
            {children}
        </MDXProvider>
    )
}
```
# MDXë¥¼ ì‚¬ìš©í•˜ëŠ” í˜ì´ì§€ì— MDXLayout ì»´í¬ë„ŒíŠ¸ ì ìš©í•˜ê¸°
```tsx
<ContentCard actions = {[<Comment/>]}>
    <ITag color="magenta"
        onClick={()=> navigate(`/?category=${frontMatter?.category}`)}
    >
        {frontMatter?.category}
    </ITag>
    <Title>{frontMatter?.title}</Title>
    <div style={{display: 'flex', justifyContent: 'space-between'}}>
        <Text type="secondary">{frontMatter?.date}</Text>
        <Text type="secondary">{frontMatter?.author} ğŸ‘©ğŸ»â€ğŸ’»</Text>
    </div>
    <Divider/>
    <MDXLayout>{children}</MDXLayout>
</ContentCard>
```

<br/>
<br/>
<br/>
<br/>

**ğŸ”— references :**
[https://www.gatsbyjs.com/docs/how-to/routing/customizing-components/](https://www.gatsbyjs.com/docs/how-to/routing/customizing-components/)