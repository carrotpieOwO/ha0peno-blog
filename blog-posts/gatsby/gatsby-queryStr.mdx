---
title: Gatsby - query stringìœ¼ë¡œ í˜ì´ì§€ê°„ ê°’ ì „ë‹¬í•˜ê¸°
category: Gatsby
date: '2023-03-05'
author: ha0peno
slug: gatsby-querystr
thumbnail: gatsby-querystr.png
---

> ìƒì„¸í˜ì´ì§€ì—ì„œ ì¹´í…Œê³ ë¦¬ëª…ì„ í´ë¦­í•  ê²½ìš°, ë©”ì¸í˜ì´ì§€ì—ì„œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ê°€ í•„í„°ë§ ë˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•  ê²¸
> gatsbyì˜ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ë³´ê¸°ë¡œ í•˜ì˜€ë‹¤.

# ğŸ° query-string install
`npm install query-string` <br/><br/>
ğŸ‘‰ğŸ» ì°¸ê³ í•œ ë¸”ë¡œê·¸ì—ì„œëŠ” @reach/routerë„ ë°›ë˜ë° ë‚˜ì˜ ê²½ìš° gatsbyë¥¼ ì„¤ì¹˜ í•  ë•Œ, ê¸°ë³¸ì ìœ¼ë¡œ ë“¤ì–´ê°€ ìˆì–´ì„œ ë”°ë¡œ ì„¤ì¹˜í•˜ì§€ ì•Šì•˜ë‹¤.

# ğŸ° withLocation ì»´í¬ë„ŒíŠ¸ ìƒì„±
- Reach Routerì˜ ìœ„ì¹˜ê³µê¸‰ìì—ì„œ ì†ì„±ì„ ì½ê³  í•˜ìœ„ êµ¬ì„±ìš”ì†Œë¥¼ ì „ë‹¬í•˜ëŠ” HOCë¥¼ ìƒì„±í•œë‹¤.
```tsx
import React from 'react'
import { Location } from '@reach/router'
import queryString from 'query-string'

const withLocation = ComponentToWrap => props => (
  <Location>
    {({ location, navigate }) => (
      <ComponentToWrap
        {...props}
        location={location}
        navigate={navigate}
        search={location.search ? queryString.parse(location.search) : {a:0}}
      />
    )}
  </Location>
)

export default withLocation
```

# ğŸ° ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  í˜ì´ì§€ ì„¤ì •
- ì‚¬ìš©í•  í˜ì´ì§€ì „ì²´ë¥¼ withLocation()ë¡œ ê°ì‹¸ì¤€ë‹¤.
- ë‚˜ì˜ ê²½ìš°, ë©”ì¸í˜ì´ì§€ì—ì„œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì˜ valueê°’ì— ë”°ë¼ ì¹´í…Œê³ ë¦¬ë¥¼ í•„í„°ë§í•´ì„œ ë³´ì—¬ì¤„ ê²ƒì´ê¸° ë•Œë¬¸ì— `index`í˜ì´ì§€ì— ì ìš©í•´ì£¼ì—ˆë‹¤.
```tsx
function IndexPage({data, search}: PageProps<Queries.BlogsQuery> | any) {
  
  // searchë¡œ ë“¤ì–´ì˜¨ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ê°’ì´ categoryë¦¬ìŠ¤íŠ¸ì— í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ ì„ íƒ
  // ì—†ì„ê²½ìš° 'All'ì„ íƒ
  const queryStr = Object.keys(categories).includes(search.category) ? search.category : 'All';

  const [ currentCategory, setCurrentCategory ] = useState(queryStr);

  useEffect(() => {
      // ì¹´í…Œê³ ë¦¬ê°€ ì„ íƒë  ê²½ìš° í•´ë‹¹ ì¹´í…Œê³ ë¦¬ë§Œ ë³´ì—¬ì£¼ê¸°
      if(currentCategory !== 'All') {
        const filter = blogData.filter(blog => blog.category === currentCategory);
        // ì„ íƒëœ ì¹´í…Œê³ ë¦¬ì— ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì „ì²´ì¹´í…Œê³ ë¦¬ ë³´ì—¬ì£¼ê¸°
        if(filter.length === 0) {
          setCurrentCategory('All')
        } 
        setViewData(filter);
      } else {
        setViewData([...blogData])
      }
  }, [currentCategory])

  return (
    // ì´í•˜ ìƒëµ
  )
}

IndexPage.propTypes = {
  search: PropTypes.object,
}
export default withLocation(IndexPage)
```

# ğŸ° ìƒì„¸í˜ì´ì§€ì—ì„œ ë©”ì¸í˜ì´ì§€ë¡œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ì „ë‹¬
```tsx
export default function Detail({data, children}:IBlogPostProps) {    
    return (
        // ì´í•˜ìƒëµ
        <ITag color="magenta"
            onClick={()=> navigate(`/?category=${frontMatter?.category}`)}
        >
            {frontMatter?.category}
        </ITag>
        // ì´í•˜ìƒëµ
    )
}
```
# ğŸ° ê²°ê³¼
- `/?category=Gatsby`ë¡œ ë§¤ê°œë³€ìˆ˜ê°€ ì˜ ì „ë‹¬ëœë‹¤.
![](https://velog.velcdn.com/images/ha0/post/4c1eca8b-b940-484d-848b-a2d07451edca/image.gif)

<br/>
<br/>
<br/>
<br/>
**ğŸ”— references**<br/>
- [https://medium.com/@chrisfitkin/how-to-get-query-string-parameter-values-in-gatsby-f714161104f](https://medium.com/@chrisfitkin/how-to-get-query-string-parameter-values-in-gatsby-f714161104f)